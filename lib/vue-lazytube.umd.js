(function(a,o){typeof exports=="object"&&typeof module!="undefined"?o(exports,require("vue-demi"),require("vue")):typeof define=="function"&&define.amd?define(["exports","vue-demi","vue"],o):(a=typeof globalThis!="undefined"?globalThis:a||self,o(a.VueLazytube={},a.VueDemi,a.Vue))})(this,function(a,o,t){"use strict";var P="",c=(e,i)=>{const s=e.__vccOpts||e;for(const[d,r]of i)s[d]=r;return s};const _={props:{aspectRatioValue:String|Number,maxWidth:String|Number},computed:{cssVars(){return{"--vlt-aspect-ratio":this.aspectRatioValue?this.aspectRatioValue:56,"--vlt-max-width":this.maxWidth?this.maxWidth:"560px"}}}};function V(e,i,s,d,r,l){return t.openBlock(),t.createElementBlock("div",{class:"vlt-wrapper",style:t.normalizeStyle(l.cssVars)},[t.renderSlot(e.$slots,"default")],4)}var u=c(_,[["render",V]]);const f=async(e,i="youtube")=>{let s=i==="youtube"?`https://www.youtube.com/oembed?url=https://www.youtube.com/watch?v=${m(e)}&format=json`:`https://vimeo.com/api/oembed.json?url=${e}`;return await window.fetch(s)},T=(e,i,s,d="youtube",r=!0)=>{let l=null;return r&&(l=document.createElement("iframe"),d==="youtube"?l.setAttribute("src",`https://www.youtube.com/embed/${e}?enablejsapi=1&autoplay=1`):l.setAttribute("src",`https://player.vimeo.com/video/${e}?autoplay=1`),l.setAttribute("frameborder","0"),l.setAttribute("allow","accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"),l.setAttribute("allowfullscreen","1"),l.setAttribute("title",`${i}`),l.setAttribute("class",`${s}`)),l},n=()=>!!window.postMessage,w=e=>{const i=e.split(":");return typeof i[1]=="undefined"?56.25:i[1]/i[0]*100},m=e=>(e=e.split(/(vi\/|v=|\/v\/|youtu\.be\/|\/embed\/)/u),e[2]!==void 0?e[2].split(/[^0-9a-z_\-]/iu)[0]:e[0]),I=e=>new URL(e).pathname.split("/").pop(),k=(e,i)=>{if(e){typeof i=="undefined"&&(i="high");let s="maxresdefault";return i==="default"?s="default":i==="medium"?s="mqdefault":i==="high"?s="hqdefault":i==="standard"?s="sddefault":i==="maxres"&&(s="maxresdefault"),"https://img.youtube.com/vi/"+e+"/"+s+".jpg"}return!1},E=(e,i)=>{if(e){typeof i=="undefined"&&(i="high");let s="960x540";return i==="default"?s="200x150":i==="medium"?s="295x166":i==="high"?s="640x360":i==="standard"?s="960x540":i==="maxres"&&(s="1280x720"),"https://i.vimeocdn.com/video/"+e+"_"+s+".jpg"}return!1};var Y="";const v={props:{type:{type:String,default:"youtube",required:!1},clicked:{type:Boolean,default:!1,required:!1},onceLoaded:{type:Boolean,default:!1,required:!1},isVideoFound:{type:Boolean,default:!1,required:!1},fetchingInfo:{type:Boolean,default:!1,required:!1},defaultThumbnailQuality:{type:String,default:"standard",required:!1},videoTitle:{type:String,default:"",required:!1},videoID:{type:String,default:"",required:!0},showTitle:{type:Boolean,default:!0,required:!1},customThumbnail:{type:String,default:"",required:!1}},computed:{isCustomTitleExist(){return this.customTitle.trim().length>0},isCustomThumbnailExist(){return this.customThumbnail.trim().length>0},defaultThumbnail(){return this.type==="youtube"?k(this.videoID,this.defaultThumbnailQuality):E(this.videoID,this.defaultThumbnailQuality)}}},S={class:"vlt-preview"},x=["src","alt"],B=["src","alt"],L={key:2,class:"ly-text"},F={class:"ly-button-wrapper"},$={key:0,height:"100%",version:"1.1",viewBox:"0 0 68 48",width:"100%"},q=[t.createElementVNode("path",{class:"ly-large-play-button-bg",d:"M66.52,7.74c-0.78-2.93-2.49-5.41-5.42-6.19C55.79,.13,34,0,34,0S12.21,.13,6.9,1.55 C3.97,2.33,2.27,4.81,1.48,7.74C0.06,13.05,0,24,0,24s0.06,10.95,1.48,16.26c0.78,2.93,2.49,5.41,5.42,6.19 C12.21,47.87,34,48,34,48s21.79-0.13,27.1-1.55c2.93-0.78,4.64-3.26,5.42-6.19C67.94,34.95,68,24,68,24S67.94,13.05,66.52,7.74z",fill:"#f00"},null,-1),t.createElementVNode("path",{d:"M 45,24 27,14 27,34",fill:"#fff"},null,-1)],C={key:1,height:"100%",version:"1.1",viewBox:"0 0 68 48",width:"100%"},W=[t.createElementVNode("path",{class:"ly-large-play-button-bg--v",d:"M 63 0 C 55.79 0.13 34 0 34 0 S 12.21 0.13 0 0 C 0.06 13.05 0 24 0 24 s 0.06 10.95 0 24 C 12.21 47.87 34 48 34 48 s 21.79 -0.13 34 -0 C 67.94 34.95 68 24 68 24 S 67.94 13.05 68 0 z",fill:"#00adef"},null,-1),t.createElementVNode("path",{d:"M 45,24 27,14 27,34",fill:"#fff"},null,-1)],M={class:"ly-loader-wrapper"},z=t.createElementVNode("span",{class:"ly-ring"},[t.createElementVNode("span"),t.createElementVNode("span"),t.createElementVNode("span")],-1),N={key:1,class:"ly-error-container"},R=[t.createStaticVNode('<span class="ly-error-icon"><svg fill="#fff" viewBox="0 0 48 48"><path d="M0 0h48v48H0V0z" fill="none"></path><path d="M22 30h4v4h-4zm0-16h4v12h-4zm1.99-10C12.94 4 4 12.95 4 24s8.94 20 19.99 20S44 35.05 44 24 35.04 4 23.99 4zM24 40c-8.84 0-16-7.16-16-16S15.16 8 24 8s16 7.16 16 16-7.16 16-16 16z" fill-opacity="0.7"></path></svg></span><span class="ly-error-content"><span class="ly-error-content__reason"><span>Video unavailable</span></span><span class="ly-error-content__subreason"><span>This video is unavailable.</span></span></span>',2)];function Q(e,i,s,d,r,l){return t.openBlock(),t.createElementBlock("a",S,[s.onceLoaded?t.createCommentVNode("",!0):(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[s.isVideoFound?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[l.isCustomThumbnailExist?(t.openBlock(),t.createElementBlock("img",{key:0,src:s.customThumbnail,alt:"Video - "+s.videoTitle,onError:i[0]||(i[0]=D=>D.target.src=l.defaultThumbnail)},null,40,x)):(t.openBlock(),t.createElementBlock("img",{key:1,src:l.defaultThumbnail,alt:"Video - "+s.videoTitle},null,8,B)),s.showTitle?(t.openBlock(),t.createElementBlock("span",L,t.toDisplayString(s.videoTitle),1)):t.createCommentVNode("",!0),t.withDirectives(t.createElementVNode("button",F,[t.renderSlot(e.$slots,"button",{},()=>[s.type==="youtube"?(t.openBlock(),t.createElementBlock("svg",$,q)):(t.openBlock(),t.createElementBlock("svg",C,W))])],512),[[t.vShow,!s.clicked]]),t.withDirectives(t.createElementVNode("div",M,[t.renderSlot(e.$slots,"loader",{},()=>[z])],512),[[t.vShow,s.clicked]])],64)):s.fetchingInfo?t.createCommentVNode("",!0):(t.openBlock(),t.createElementBlock("div",N,R))],64))])}var h=c(v,[["render",Q]]);const p={name:"Helper",computed:{aspectRatioValue:function(){return w(this.aspectRatio)},getTitle:function(){return this.customTitle?this.customTitle:this.videoInfo!==null?this.videoInfo.title:this.customTitle}},methods:{resetView(){this.iframeEl!==null&&(this.iframeEl.remove(),this.iframeEl=null,this.clicked=!1,this.onceLoaded=!1)},initiateIframe(e=!1,i="youtube"){this.iframeEl=T(this.videoID,this.getTitle,this.iframeClass,i),this.iframeEl.addEventListener("load",()=>{this.fetchingInfo===!1&&(this.onceLoaded||(this.onceLoaded=!0)),e&&(i==="youtube"?this.iframeEl.contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}',"*"):this.iframeEl.contentWindow.postMessage('{"method":"play"}',"*"))}),this.$el.appendChild(this.iframeEl),this.iframeEl.focus()}}};var y=o.defineComponent({mixins:[p],props:{src:{type:String,required:!0},aspectRatio:{type:String,default:"16:9",validator:function(e){return/^\d+:\d+$/u.test(e)},required:!1},showTitle:{type:Boolean,default:!0,required:!1},maxWidth:{type:String,default:"560px",required:!1},autoplay:{type:Boolean,default:!1,required:!1},thumbnailQuality:{type:String,default:"standard",required:!1},iframeClass:{type:String,default:"ly-iframe",required:!1},customTitle:{type:String,default:"",required:!1},customThumbnail:{type:String,default:"",required:!1},oembedFetch:{type:Boolean,default:!0,required:!1}},data(){return{clicked:!1,onceLoaded:!1,iframeEl:null,videoInfo:null,fetchingInfo:!0,isVideoFound:!1}},mounted(){this.oembedFetch?f(this.src).then(function(e){return e.json()}).then(e=>{this.videoInfo=e,this.isVideoFound=!0}).catch(()=>{this.videoInfo=null,this.isVideoFound=!1}).finally(()=>{this.fetchingInfo=!1,this.autoplay&&this.playVideo()}):(this.isVideoFound=!0,this.fetchingInfo=!1)},methods:{pauseVideo(){!n||this.iframeEl!==null&&this.iframeEl.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*")},playVideo(){!n||(this.iframeEl===null?this.initiateIframe(this.autoplay):this.iframeEl.contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}',"*"))},stopVideo(){!n||this.iframeEl!==null&&this.iframeEl.contentWindow.postMessage('{"event":"command","func":"stopVideo","args":""}',"*")}},computed:{videoID:function(){return m(this.src)}},render(){return o.isVue2?o.h(u,{aspectRatioValue:this.aspectRatioValue,maxWidth:this.maxWidth},()=>[o.h(h,{isVideoFound:this.isVideoFound,fetchingInfo:this.fetchingInfo,defaultThumbnailQuality:this.thumbnailQuality,customThumbnail:this.customThumbnail,videoTitle:this.getTitle,videoID:this.videoID,showTitle:this.showTitle,clicked:this.clicked,onceLoaded:this.onceLoaded,on:{click:()=>{this.clicked=!0,this.fetchingInfo===!1&&!this.onceLoaded&&this.isVideoFound&&this.initiateIframe()}}},{button:()=>this.$slots.button?this.$slots.button():null,loader:()=>this.$slots.loader?this.$slots.loader():null})]):o.h(u,{aspectRatioValue:this.aspectRatioValue,maxWidth:this.maxWidth},()=>[o.h(h,{isVideoFound:this.isVideoFound,fetchingInfo:this.fetchingInfo,defaultThumbnailQuality:this.thumbnailQuality,customThumbnail:this.customThumbnail,videoTitle:this.getTitle,videoID:this.videoID,showTitle:this.showTitle,clicked:this.clicked,onceLoaded:this.onceLoaded,onClick:()=>{this.clicked=!0,this.fetchingInfo===!1&&!this.onceLoaded&&this.isVideoFound&&this.initiateIframe()}},{button:()=>this.$slots.button?this.$slots.button():null,loader:()=>this.$slots.loader?this.$slots.loader():null})])}}),b=o.defineComponent({props:{src:{type:String,required:!0},aspectRatio:{type:String,default:"16:9",validator:function(e){return/^\d+:\d+$/u.test(e)},required:!1},showTitle:{type:Boolean,default:!0,required:!1},maxWidth:{type:String,default:"560px",required:!1},autoplay:{type:Boolean,default:!1,required:!1},thumbnailQuality:{type:String,default:"standard",required:!1},iframeClass:{type:String,default:"ly-iframe",required:!1},customTitle:{type:String,default:"",required:!1},customThumbnail:{type:String,default:"",required:!1},oembedFetch:{type:Boolean,default:!0,required:!1}},mixins:[p],data(){return{clicked:!1,onceLoaded:!1,iframeEl:null,videoInfo:null,fetchingInfo:!0,isVideoFound:!1}},mounted(){this.oembedFetch?f(this.src,"vimeo").then(function(e){return e.json()}).then(e=>{this.videoInfo=e,this.isVideoFound=!0}).catch(()=>{this.videoInfo=null,this.isVideoFound=!1}).finally(()=>{this.fetchingInfo=!1,this.autoplay&&this.playVideo()}):(this.isVideoFound=!0,this.fetchingInfo=!1)},methods:{pauseVideo(){!n||this.iframeEl!==null&&this.iframeEl.contentWindow.postMessage('{"method":"pause"}',"*")},playVideo(){!n||(this.iframeEl===null?this.initiateIframe(this.autoplay,"vimeo"):this.iframeEl.contentWindow.postMessage('{"method":"play"}',"*"))},stopVideo(){!n||this.iframeEl!==null&&this.iframeEl.contentWindow.postMessage('{"method":"pause"}',"*")}},computed:{videoID:function(){return I(this.src)},processedThumbnail(){return this.customThumbnail?this.customThumbnail:this.videoInfo!==null?this.videoInfo.thumbnail_url:""}},render(){return o.isVue2?o.h(u,{aspectRatioValue:this.aspectRatioValue,maxWidth:this.maxWidth},()=>[o.h(h,{type:"vimeo",isVideoFound:this.isVideoFound,fetchingInfo:this.fetchingInfo,defaultThumbnailQuality:this.thumbnailQuality,customThumbnail:this.processedThumbnail,videoTitle:this.getTitle,videoID:this.videoID,showTitle:this.showTitle,clicked:this.clicked,onceLoaded:this.onceLoaded,on:{click:()=>{this.clicked=!0,this.fetchingInfo===!1&&!this.onceLoaded&&this.isVideoFound&&this.initiateIframe(!1,"vimeo")}}},{button:()=>this.$slots.button?this.$slots.button():null,loader:()=>this.$slots.loader?this.$slots.loader():null})]):o.h(u,{aspectRatioValue:this.aspectRatioValue,maxWidth:this.maxWidth},()=>[o.h(h,{type:"vimeo",isVideoFound:this.isVideoFound,fetchingInfo:this.fetchingInfo,defaultThumbnailQuality:this.thumbnailQuality,customThumbnail:this.processedThumbnail,videoTitle:this.getTitle,videoID:this.videoID,showTitle:this.showTitle,clicked:this.clicked,onceLoaded:this.onceLoaded,onClick:()=>{this.clicked=!0,this.fetchingInfo===!1&&!this.onceLoaded&&this.isVideoFound&&this.initiateIframe(!1,"vimeo")}},{button:()=>this.$slots.button?this.$slots.button():null,loader:()=>this.$slots.loader?this.$slots.loader():null})])}});const g=new Map,j=(e,i)=>{if(g.has(e)){console.warn(`pluginName is exist \u3010${e}\u3011 \u8BE5\u63D2\u4EF6\u540D\u5DF2\u5B58\u5728, \u5168\u5C40\u53EA\u5F15\u5165\u4E00\u6B21\u5C31\u591F\u4E86!`);return}g.set(e,i)},A=e=>{e.component("LazyYoutube",y),e.component("LazyVimeo",b)};a.LazyVimeo=b,a.LazyYoutube=y,a.addLazytubePlugin=j,a.install=A,Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
//# sourceMappingURL=vue-lazytube.umd.js.map
